
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17: http://docutils.sourceforge.net/" />

    <title>Generating fibrous mats &#8212; PoreSpy  documentation</title>
    
  <link href="../../../_static/css/theme.css" rel="stylesheet" />
  <link href="../../../_static/css/index.f6b7ca918bee2f46fd9abac01cfb07d5.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/css/custom.css" />
    
  <link rel="preload" as="script" href="../../../_static/js/index.1e043a052b0af929e4d8.js">

    <script id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    <script src="../../../_static/js/custom.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Making blobs" href="making_blobs.html" />
    <link rel="prev" title="Generating polydisperse spheres using RSA" href="RSA.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">


    
      
      <a class="navbar-brand" href="https://www.porespy.org">
        <img src="../../../_static/porespy_logo.png" class="logo" alt="logo">
      </a>
      
    

    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-menu" aria-controls="navbar-menu" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    
    <div id="navbar-menu" class=" collapse navbar-collapse">
      <ul id="navbar-main-elements" class="navbar-nav mr-auto">
        <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../user_guide/index.html">
  User Guide
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../modules/index.html">
  Module and Function Reference
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="../../../examples.html">
  Examples
 </a>
</li>

        
        <li class="nav-item">
            <a class="nav-link nav-external" href="https://github.com/PMEAL/porespy/issues">Issue Tracker<i class="fas fa-external-link-alt"></i></a>
        </li>
        
        <li class="nav-item">
            <a class="nav-link nav-external" href="https://github.com/PMEAL/porespy/discussions">Get Help<i class="fas fa-external-link-alt"></i></a>
        </li>
        
      </ul>

      <ul id="navbar-icon-links" class="navbar-nav" aria-label="Quick Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/PMEAL/porespy" rel="noopener" target="_blank" title="GitHub">
            <span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://porespy.substack.com/" rel="noopener" target="_blank" title="Substack">
            <span><i class="fas fa-envelope-square"></i></span>
            <label class="sr-only">Substack</label>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://twitter.com/porespy" rel="noopener" target="_blank" title="Twitter">
            <span><i class="fab fa-twitter-square"></i></span>
            <label class="sr-only">Twitter</label>
          </a>
        </li>
      </ul>
    </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar"><form class="bd-search d-flex align-items-center" action="../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form>
<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="current nav bd-sidenav">
 <li class="toctree-l2">
  <a class="reference internal" href="RSA.html">
   Generating polydisperse spheres using RSA
  </a>
 </li>
 <li class="toctree-l2 current active">
  <a class="current reference internal" href="#">
   Generating fibrous mats
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="making_blobs.html">
   Making blobs
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../howtos/bundle_of_tubes.html">
   bundle_of_tubes
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../howtos/fractal_noise.html">
   fractal_noise
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../howtos/insert_shape.html">
   insert_shape
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../howtos/lattice_spheres.html">
   lattice_spheres
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../howtos/line_segment.html">
   line_segment
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../howtos/overlapping_spheres.html">
   overlapping_spheres
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../howtos/polydisperse_spheres.html">
   polydisperse _spheres
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../howtos/voronoi_edges.html">
   voronoi_edges
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../../filters/tutorials/adding_chords.html">
   Applying chords to 2D and 3D images
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../../filters/tutorials/local_thickness.html">
   Local thickness
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../../filters/tutorials/snow_partitioning.html">
   SNOW partitioning
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../../filters/howtos/apply_chords.html">
   apply_chords
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../../filters/howtos/apply_chords_3D.html">
   apply_chords_3D
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../../filters/howtos/apply_padded.html">
   apply_padded
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../../filters/howtos/chunked_func.html">
   chunked_func
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../../filters/howtos/distance_transform_lin.html">
   distance_transform_lin
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../../filters/howtos/fill_blind_pores.html">
   fill_blind_pores
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../../filters/howtos/find_disconnected_voxels.html">
   find_disconnected_voxels
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../../filters/howtos/find_dt_artifacts.html">
   find_dt_artifacts
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../../filters/howtos/find_peaks.html">
   find_peaks
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../../filters/howtos/flood.html">
   flood
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../../filters/howtos/hold_peaks.html">
   hold_peaks
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../../filters/howtos/prune_branches.html">
   prune_branches
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../../filters/howtos/reduce_peaks.html">
   reduce_peaks
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../../filters/howtos/region_size.html">
   region_size
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../../filters/howtos/snow_partitioning_n.html">
   snow_partitioning_n
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../../filters/howtos/trim_disconnected_blobs.html">
   trim_disconnected_blobs
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../../filters/howtos/trim_extrema.html">
   trim_extrema
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../../filters/howtos/trim_floating_solid.html">
   trim_floating_solid
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../../filters/howtos/trim_nearby_peaks.html">
   trim_nearby_peaks
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../../filters/howtos/trim_nonpercolating_paths.html">
   trim_nonpercolating_paths
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../../filters/howtos/trim_saddle_points.html">
   trim_saddle_points
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../../filters/howtos/trim_small_clusters.html">
   trim_small_clusters
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../../metrics/tutorials/porosity_profiles.html">
   Obtaining the porosity profile along each principle axis
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../../metrics/tutorials/regionprops_3d.html">
   Using regionprops_3d to analyze properties of each pore
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../../metrics/tutorials/two_point_correlation.html">
   Two point correlation function
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../../metrics/howtos/chord_counts.html">
   chord_counts
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../../metrics/howtos/linear_density.html">
   lineal_path_distribution
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../../metrics/howtos/mesh_surface_area.html">
   mesh_surface_area
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../../metrics/howtos/phase_fraction.html">
   phase_fraction
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../../metrics/howtos/pore_size_distribution.html">
   pore_size_distribution
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../../metrics/howtos/porosity.html">
   porosity
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../../metrics/howtos/radial_density.html">
   radial_density_distribution
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../../metrics/howtos/region_interface_areas.html">
   region_interface_areas
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../../metrics/howtos/region_surface_areas.html">
   region_surface_areas
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../../metrics/howtos/representative_elementary_volume.html">
   representative_elementary_volume
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../../metrics/howtos/two_point_correlation_bf.html">
   two_point_correlation_bf
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../../metrics/howtos/two_point_correlation_fft.html">
   two_point_correlation_fft
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../../networks/tutorials/adding_boundary_pores.html">
   Adding Boundary Pores
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../../networks/tutorials/map_to_regions.html">
   map_to_regions maps
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../../tools/howtos/align_image_with_openpnm.html">
   align_image_with_openpnm
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../../tools/howtos/bbox_to_slices.html">
   bbox_to_slices
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../../tools/howtos/extract_cylinder.html">
   extract_cylinder
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../../tools/howtos/extract_regions.html">
   extract_regions
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../../tools/howtos/extract_subsection.html">
   extract_subsection
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../../tools/howtos/fftmorphology.html">
   fftmorphology
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../../tools/howtos/get_border.html">
   get_border
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../../tools/howtos/get_planes.html">
   get_planes
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../../tools/howtos/insert_cylinder.html">
   insert_cylinder
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../../tools/howtos/insert_sphere.html">
   insert_sphere
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../../tools/howtos/make_contiguous.html">
   make_contiguous
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../../tools/howtos/norm_to_uniform.html">
   norm_to_uniform
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../../tools/howtos/overlay.html">
   overlay
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../../tools/howtos/pad_faces.html">
   pad_faces
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../../tools/howtos/ps_ball.html">
   ps_ball
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../../tools/howtos/ps_disk.html">
   ps_disk
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../../tools/howtos/ps_rect.html">
   ps_rect
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../../tools/howtos/ps_round.html">
   ps_round
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../../tools/howtos/sanitize_filename.html">
   sanitize_filename
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../../tools/howtos/seq_to_satn.html">
   seq_to_satn
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../../tools/howtos/size_to_seq.html">
   size_to_seq
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../../tools/howtos/subdivide.html">
   subdivide
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../../tools/howtos/unpad.html">
   unpad
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../../tools/howtos/zero_corners.html">
   zero_corners
  </a>
 </li>
</ul>
  </div>
</nav>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
              

<nav id="bd-toc-nav">
    
</nav>


              
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 0;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt a.copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}
</style>
<section id="Generating-fibrous-mats">
<h1>Generating fibrous mats<a class="headerlink" href="#Generating-fibrous-mats" title="Permalink to this headline">¶</a></h1>
<p>In this notebook, we’re learning how to use <code class="docutils literal notranslate"><span class="pre">porespy.generators.cylinders</span></code> method to generate images that mimic fibrous mats.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>import time
import porespy as ps
import matplotlib.pyplot as plt
import numpy as np
ps.visualization.set_mpl_style()
np.random.seed(10)
ps.settings.tqdm[&quot;disable&quot;] = True
</pre></div>
</div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">cylinders</span></code> function works either by providing the number of cylinders or the target porosity. If the number of cylinders is given, the function tries to fit in that many cylinders in a bounding box defined by its shape.</p>
<p>When providing porosity, the function works by estimating the number of cylinders needed to be inserted into the domain by estimating cylinder length, and exploiting the fact that, when inserting any potentially overlapping objects randomly into a volume v_total (which has units of pixels and is equal to dimx x dimy x dimz, for example), such that the total volume of objects added to the volume is v_added (and includes any volume that was inserted but overlapped with already occupied space), the
resulting porosity will be equal to:</p>
<div class="math notranslate nohighlight">
\[\epsilon = \exp(-\frac{V_{added}}{V_{total}})\]</div>
<p>After intially estimating the cylinder number and inserting a small fraction of the estimated number, the true cylinder volume is calculated, the estimate refined, and a larger fraction of cylinderss inserted. This is repeated a number of times according to the <code class="docutils literal notranslate"><span class="pre">max_iter</span></code> argument, yielding an image with a porosity close to the goal.</p>
<p>This first example shows that the output images are similar to the output of <code class="docutils literal notranslate"><span class="pre">cylinders</span></code> when providing the number of cylinders (for an image with the same number of cylinders), and that the goal porosity is reached.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>dim = 200
shape = [dim, dim, dim]
radius = 4
phi_max = 0
theta_max = 90
length = None
max_iter = 3
target_porosity = 0.8
</pre></div>
</div>
</div>
<p>Generate image by providing the target porosity:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>im_using_porosity = ps.generators.cylinders(
    shape=shape, radius=radius, porosity=target_porosity, phi_max=phi_max,
    theta_max=theta_max, length=length, max_iter=max_iter)
print(f&quot;Output porosity is {ps.metrics.porosity(im_using_porosity)}.&quot;)
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Output porosity is 0.8031505.
</pre></div></div>
</div>
<p>Now generate another image by providing the number of cylinders rather than porosity.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>im_using_ncylinders = ps.generators.cylinders(
    shape=shape,
    radius=radius,
    ncylinders=293,
    phi_max=phi_max,
    theta_max=theta_max,
    length=length,
    max_iter=max_iter)
three_d1 = ps.visualization.show_3D(im_using_porosity)
three_d2 = ps.visualization.show_3D(im_using_ncylinders)
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>fig, ax = plt.subplots(1, 2, figsize=[8, 4])
ax[0].imshow(three_d1)
ax[1].imshow(three_d2)
ax[0].set_title(&quot;Using porosity&quot;)
ax[1].set_title(&quot;Using # cylinders&quot;);
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../../_images/examples_generators_tutorials_cylinders_8_0.svg" src="../../../_images/examples_generators_tutorials_cylinders_8_0.svg" /></div>
</div>
<p>This next block shows that the time penalty over inserting the same number of fibers using generators.cylinders is about 2x, and the time penalty ratio increases with requested porosity, when image generation is faster anyway.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>porosity_target = [0.1, 0.4, 0.8, 0.95]
porosity_actual = []
runtime_ratios = []
runtime_porosity = []
runtime_ncylinder = []

for eps in porosity_target:
    temp = time.time()
    im = ps.generators.cylinders(
        shape=shape,
        radius=radius,
        porosity=eps,
        phi_max=phi_max,
        theta_max=theta_max,
        length=length,
        max_iter=max_iter)
    runtime_porosity.append(time.time() - temp)
    porosity_actual.append(ps.metrics.porosity(im))
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span># The number of cylinders added during the previous phase
ncylinders = [3033, 1143, 294, 75]

for ncylinder in ncylinders:
    temp = time.time()
    im = ps.generators.cylinders(
        shape=shape,
        radius=radius,
        ncylinders=ncylinder,
        phi_max=phi_max,
        theta_max=theta_max,
        length=length,
        max_iter=max_iter)
    runtime_ncylinder.append(time.time() - temp)

runtime_ratios = [t1 / t2 for (t1, t2) in zip(runtime_porosity, runtime_ncylinder)]
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>fig, ax = plt.subplots(1, 2, figsize=(8, 4))

ax[0].plot(porosity_target, runtime_ncylinder, &quot;o-&quot;, label=&#39;Using # cylinders&#39;)
ax[0].plot(porosity_target, runtime_porosity, &quot;o-&quot;, label=&#39;Using porosity&#39;)
ax[0].set_xlabel(&#39;Goal Porosity&#39;);
ax[0].set_ylabel(&#39;Duration [sec]&#39;);
ax[0].legend()

ax[1].scatter(porosity_target, porosity_actual)
ax[1].plot(porosity_target, porosity_target, &quot;g--&quot;)
ax[1].set_xlabel(&#39;Goal Porosity&#39;)
ax[1].set_ylabel(&#39;Attained porosity&#39;);
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../../_images/examples_generators_tutorials_cylinders_12_0.svg" src="../../../_images/examples_generators_tutorials_cylinders_12_0.svg" /></div>
</div>
<p>Lastly, this block shows that more iterations improves proximity to goal porosity.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>porosity_target = 0.85
porosity_actual = []
max_iters = range(3, 10)

for max_iter in max_iters:
    im = ps.generators.cylinders(
        shape=shape,
        radius=radius,
        porosity=porosity_target,
        phi_max=phi_max,
        theta_max=theta_max,
        length=length,
        max_iter=max_iter)
    porosity_actual.append(ps.metrics.porosity(im))
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>fig, ax = plt.subplots(figsize=(5, 4));
ax.plot(max_iters, porosity_actual, &quot;o-&quot;)
ax.set_xlabel(&quot;Number of iterations&quot;)
ax.set_ylabel(&quot;Obtained porosity&quot;)
ax.set_ylim((0, 1));
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../../_images/examples_generators_tutorials_cylinders_15_0.svg" src="../../../_images/examples_generators_tutorials_cylinders_15_0.svg" /></div>
</div>
</section>


              </div>
              
              
          </main>
          

      </div>
    </div>

    
  <script src="../../../_static/js/index.1e043a052b0af929e4d8.js"></script>


    <footer class="footer mt-5 mt-md-0">
  <div class="container">
    <p>
          &copy; Copyright 2021 PoreSpy Team.<br/>
    </p>
  </div>
</footer>
  </body>
</html>